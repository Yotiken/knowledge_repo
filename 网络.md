### 什么条件下使用epoll，什么条件下使用select？

### connect失败，可能有哪些原因？

①如果connect连接的目标端口不存在，或者该端口仍处于TIME_WAIT状态，则服务器将发送一个复位报文段给客户端，connect调用失败。 ②如果目标端口存在，但在connect在超时范围内没有接收到服务器的确认报文段，则connect调用失败`<br>`

- 客户端在connect阶段出错，服务器有什么处理措施
- 对待网络异常服务器有什么处理措施
- SQL注入是什么，如何避免SQL注入？

  SQL 注入就是在用户输入的字符串中加入 SQL 语句，如果在设计不良的程序中忽略了检查，那么这些注入进去的 SQL 语句就会被数据库服务器误认为是正常的 SQL 语句而运行，攻击者就可以执行计划外的命令或访问未被授权的数据`<br>`

  - 过滤输入内容，校验字符串过滤输入内容就是在数据提交到数据库之前，就把用户输入中的不合法字符剔除掉。如果值属于特定的类型或有具体的格式，那么在拼接 SQL 语句之前就要进行校验，验证其有效性。比如对于某个传入的值，如果可以确定是整型，则要判断它是否为整型，在浏览器端（客户端）和服务器端都需要进行验证。
  - 参数化查询参数化查询目前被视作是预防 SQL 注入攻击最有效的方法。参数化查询是指在设计与数据库连接并访问数据时，在需要填入数值或数据的地方，使用参数（Parameter）来给值。MySQL 的参数格式是以“?”字符加上参数名称而成，如下所示：`UPDATE myTable SET c1 = ?c1, c2 = ?c2, c3 = ?c3 WHERE c4 = ?c4`在使用参数化查询的情况下，数据库服务器不会将参数的内容视为 SQL 语句的一部分来进行处理，而是在数据库完成 SQL 语句的编译之后，才套用参数运行。因此就算参数中含有破坏性的指令，也不会被数据库所运行。
  - 安全测试、安全审计除了开发规范，还需要合适的工具来确保代码的安全。我们应该在开发过程中应对代码进行审查，在测试环节使用工具进行扫描，上线后定期扫描安全漏洞。通过多个环节的检查，一般是可以避免 SQL 注入的。
  - 避免直接向用户显示数据库错误攻击者可以使用这些错误消息来获取有关数据库的信息。

### 怎么判断服务器是否正常

- **网络连接是否正常**：可以使用ping命令来测试服务器的网络连接是否正常。如果ping命令可以正常返回结果，则表明服务器的网络连接正常。
- **服务是否启动**：可以使用ps命令来查看服务器上是否启动了需要的服务。如果服务已经启动，则表明服务器正常运行。
- **服务是否正常响应**：可以使用curl或其他工具来测试服务是否正常响应。如果服务可以正常响应，则表明服务器正常运行。
- **服务器资源是否充足**：可以使用top或其他工具来查看服务器的资源使用情况。如果服务器的资源使用率过高，则表明服务器可能存在性能问题。

### HTTP状态码

- 2xx类状态码表示服务器成功处理了客户端的请求(200 OK,204 No Content,206 Partial Content)
- 3xx  类状态码表示客户端请求的资源发生了变动,需要客户端用新的 URL 重新发送请求获取资源,也就是重定向(301 Moved Permanently,302 Found,304 Not Modified)
- 4xx  类状态码表示客户端发送的报文有误,服务器无法处理,也就是错误码的含义(400 Bad Request,403 Forbidden,404 Not Found)
- 5xx  类状态码表示客户端请求报文正确,但是服务器处理时内部发生了错误,属于服务器端的错误码(500 Internal Server Error,501 Not Implemented,502 Bad Gateway, 503 Service Unavailable)

### 默认端口号

1.HTTP协议代理服务器常用端口号：80/8080/3128/8081/9098`<br>`2.SOCKS代理协议服务器常用端口号：1080`<br>`3.FTP（文件传输）协议代理服务器常用端口号：21`<br>`4.Telnet（远程 https://sunlogin.oray.com/personal/
登录）协议代理服务器常用端口号：23`<br>`HTTP服务器，默认端口号为80/tcp（木马Executor开放此端口）`<br>`HTTPS（securely transferring web pages）服务器，默认端口号为443/tcp 443/udp`<br>`Telnet（不安全的文本传送），默认端口号为23/tcp（木马Tiny Telnet Server所开放的端口）`<br>`SSH（安全登录）、SCP（文件传输）、端口号重定向，默认的端口号为22/tcp`<br>`

### 如果一个项目全都使用POST会如何？

1 不符合HTTP语义：HTTP协议中，POST请求主要用于向服务器提交数据，对资源进行创建、更新等操作。如果所有请求都使用POST，可能会违背HTTP的语义，让代码更难以理解和维护。`<br>`2 安全性问题：POST请求通常用于包含敏感数据的操作，如用户登录、账号注册等。过度使用POST可能会导致敏感数据暴露在URL中，增加了数据泄漏的风险。`<br>`3 缓存问题：POST请求默认是不可缓存的，而GET请求通常是可缓存的。如果项目中所有请求都使用POST，可能导致缓存失效或缓存策略不够灵活，影响性能。`<br>`4 可读性和调试问题：GET请求可以在URL中直接查看请求参数，方便调试和理解。而POST请求的参数通常是通过请求体传递，对于查看和调试不够直观。`<br>`5 不符合RESTful风格：在RESTful API设计中，使用GET请求用于获取资源，使用POST请求用于创建资源，使用PUT请求用于更新资源，使用DELETE请求用于删除资源。过度使用POST可能导致API设计不符合RESTful风格。`<br>`尽管POST请求有其适用的场景，但在项目中应根据实际需求来选择合适的HTTP方法。常用的原则是：`<br>`

- 使用GET请求获取资源，如获取数据、查询操作等。
- 使用POST请求进行数据提交、创建资源和更新资源，尤其在包含敏感信息或长参数的情况下。
- 使用PUT请求进行资源更新，但要求对请求的数据做完整更新。
- 使用DELETE请求进行资源删除。

### 什么是DNS劫持？

DNS劫持是一种网络攻击方式，它的目标是篡改或拦截域名系统（DNS）的查询过程，以便将用户的域名解析请求重定向到攻击者指定的虚假网站或服务器。`<br>`DNS劫持的主要方式包括：`<br>`1 修改本地主机文件：攻击者可以修改用户计算机上的本地主机文件，将特定域名映射到攻击者控制的虚假IP地址。这样用户在访问被劫持的域名时会被重定向到攻击者的虚假网站。`<br>`2 污染DNS缓存：攻击者可以通过向DNS服务器发送伪造的响应，将虚假的IP地址缓存在DNS服务器中，导致用户向被攻击的域名发送请求时，DNS服务器返回虚假的IP地址，从而将用户重定向到攻击者的虚假网站。`<br>`3 BGP劫持：攻击者可以通过篡改互联网路由协议BGP（Border Gateway Protocol）的路由表，将某个域名的流量引导到攻击者控制的服务器上，实现对该域名的劫持。`<br>`DNS劫持对用户造成的影响是，当用户尝试访问一个正常的网站时，会被重定向到攻击者的虚假网站，而用户通常无法察觉到这一点。为了防止DNS劫持，用户可以使用可信赖的DNS服务器、启用DNSSEC（DNS Security Extensions）等技术来增强DNS查询的安全性。同时，网站管理员也可以采取一些措施来防止他们的网站受到DNS劫持的影响，如使用HTTPS加密传输、设置DNSSEC等。`<br>`

### 场景题：有一个文件下载系统，支持并发下载和断点下载，那客户端和服务器端怎么设计？网络通信走socket（tcp）还是http？  CDN？

服务器端实现：`<br>`1 支持 Range 请求头：服务器需要支持 HTTP 请求头中的 Range 字段。当客户端希望进行断点下载时，会在 HTTP 请求中添加 Range 请求头，指定文件的下载范围。服务器应该解析 Range 请求头并返回相应的部分文件内容。`<br>`2 传输文件内容：在接收到带有 Range 请求头的下载请求时，服务器应该根据 Range 请求头指定的范围，读取相应的文件内容，并返回给客户端。可以通过文件流操作来实现部分文件的传输。`<br>`客户端实现： 1 发送 Range 请求头：客户端在进行断点下载时，需要在 HTTP 请求中添加 Range 请求头，指定文件的下载范围。Range 请求头的格式为 “Range: bytes=start-end”，其中 start 和 end 分别为文件的起始字节和结束字节位置。 2 下载断点文件：当客户端接收到服务器返回的部分文件内容时，需要将这部分内容追加到已下载的文件中，而不是从头开始下载整个文件。 3 记录已下载部分：客户端需要记录已下载的文件部分，以便在后续断点下载时继续传输文件的剩余部分。可以在本地保存一个下载记录文件，记录已下载的文件大小或已下载的文件块信息。`<br>`需要注意的是，断点下载的实现需要服务器端和客户端的配合。服务器需要支持 Range 请求头并正确处理断点下载的请求，而客户端需要发送正确的 Range 请求头，并能够正确处理服务器返回的部分文件内容。`<br>`CDN（Content Delivery Network）并不是一种协议，而是一种网络架构，旨在通过将内容分发到全球各地的缓存节点，提高用户访问网站的速度和性能。CDN通常使用HTTP作为传输协议，因此断点下载可以与CDN配合使用，但断点下载本身主要涉及HTTP协议的特性，与CDN并没有直接的关系。`<br>`

### 了解ngnix的正向代理和反向代理吗？

客户端向服务器发送请求时，会首先经过 Nginx 服务器，由服务器将请求分发到相应的 WEB 服务器。正向代理是代理客户端。反向代理则是代理服务器，暴露的是代理服务器地址，隐藏了真实服务器IP地址。`<br>`